name: deploy prod

on:
  push:
    branches:
      - main

jobs:
    # build:
    #   runs-on: ubuntu-latest
    #   steps:
    #     - uses: actions/checkout@v4
    #     - uses: actions/setup-node@v3
    #       with:
    #         node-version: 20.x.x
    #         cache: npm
    #     - run: npm ci
    #     - run: npm run build
        
    deploy:
      runs-on: ubuntu-latest
      steps:
        - uses: 'actions/checkout@v4'
        - id: 'auth'
          uses: 'google-github-actions/auth@v2'
          with:
            workload_identity_provider: 'projects/864572051424/locations/global/workloadIdentityPools/github/providers/saml-lpds'
            service_account: '864572051424-compute@developer.gserviceaccount.com'
        - uses: 'google-github-actions/ssh-compute@v1'
          with:
            instance_name: 'instance-2'
            zone: 'us-central1-a'
            ssh_private_key: '${{ secrets.GCP_SSH_PRIVATE_KEY }}'
            command: 'echo Hello world'
